{% extends "base_site_template.html" %}

{% block headtags %} 
    <link rel="stylesheet" type="text/css" href="/yawt_static/blog.css" />
{% endblock %}

{% block content %}
    <div id="sidebar">
        <form action="{{'blog/search/'|url}}" method="get">
            <div>
                <input id="searchtext" type="text" name="searchtext"/>
                <input id="searchbutton" type="submit" value="Search"/>
            </div>
        </form>
 
        {% if categories.categories %}
        <p id="categorysection">Categories</p>
        <ul>
            {% for c in categories.categories.subcategories.values() recursive %}
            <li><a href="{{c.url|url}}">{{c.category}} ({{c.count}})</a>
                {% if c.subcategories %}
                <ul>{{ loop(c.subcategories) }}</ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if tagging.tags %}
        <p id="tagsection">Tags</p>
        <ul>
            {% for tag, info in tagging.tags.items(): %}
            <li><a href="{{info.url|url}}">{{tag}} ({{info.count}})</a></li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if archiving.archives %}
        <p id="archivesection">Archives</p>
        <ul>
            {% for item in archiving.archives: %}
            <li><a href="{{item.url|url}}">{{ "%04d-%02d"|format(item.year, item.month)}}
                    ({{item.count}})</a></li>
            {% endfor %}
          </ul>
        {% endif %}

    </div>

    <div id="blogcontent">
        <h1 id="blogtitle">{{config.blogtitle}}</h1>
        <h2 id="blogdescription">{{config.blogdescription}}</h2>
        {% block blogcontent %}{% endblock %}
        {% include 'footer.html' %}
    </div>
{% endblock %}
